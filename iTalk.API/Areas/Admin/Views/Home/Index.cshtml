@using Microsoft.AspNet.Identity
@{
    Layout = "~/Areas/Admin/Views/Shared/_ToolbarLayout.cshtml";
}
<div class="row workarea"
     ng-controller="indexController"
     ng-model="me"
     ng-init="me = { id: @(User.Identity.GetUserId<long>()), userName: '@User.Identity.Name' }"
     ng-cloak>
    <div id="sidebar" ng-if="!isPhone">
        @Html.Partial("_Sidebar")
    </div>
    <div>
        <div class="main-content">
            <!--聊天內容區塊-->
            <div class="area">
                <label class="input-lg affix" ng-bind="currentFriend.alias"></label>
                <ul id="content" class="content-height list-unstyled">
                    <li ng-switch="isSender(chat)"
                        ng-repeat="chat in currentFriend.chats">
                        <div ng-class="{'text-right':isSender(chat)}">
                            <sub ng-switch-when="true" ng-bind="chat.date | date:'hh:mm:ss':'utc +08:00'" class="sender-date"></sub>
                            <div class="chat-bubble tri-right round"
                                 ng-class="{'right-in':isSender(chat), 'left-in':!isSender(chat)}">
                                <div class="chat-content">
                                    <p ng-bind=" chat.content" style="vertical-align:central"></p>
                                </div>
                            </div>
                            <sub ng-switch-when="false" ng-bind="chat.date | date:'hh:mm:ss':'utc +08:00'" class="receiver-date"></sub>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!--輸入區塊-->
        <div class="chat-input-area">
            <input ng-disabled="!currentFriend"
                   ng-model="currentFriend.input"
                   ng-keydown="$event.which === 13 && send()"
                   class="chat-input form-control input-sm"
                   placeholder=@Resources.PleaseInputMessage />
            <div class="btn-group chat-input-buttons">
                <a href="javascript:;"><span class="fa fa-smile-o fa-lg"></span></a>
                <a href="javascript:;"><span class="fa fa-paperclip fa-lg"></span></a>
            </div>
        </div>
    </div>
</div>
<div id="sidebar" ng-if="isPhone">
    @Html.Partial("_Sidebar")
</div>

@section style{
    @Styles.Render("~/Content/angular")
}

@section scripts{
    @Scripts.Render("~/bundles/angular")
    @Scripts.Render("~/bundles/signalR")
    <script type="text/ng-template" id="createGroupView">
        @Html.Partial("_CreateGroup")
    </script>
}

